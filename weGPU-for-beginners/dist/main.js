(()=>{"use strict";const e="struct Fragment {\n    @builtin(position) Position : vec4<f32>,\n    @location(0) Color : vec4<f32>\n};\n\n@vertex\nfn vs_main(@location(0) vertexPosition: vec2<f32>, @location(1) vertexColor: vec3<f32>  ) -> Fragment {\n\n    var output : Fragment;\n    output.Position = vec4<f32>(vertexPosition, 0.0, 1.0);\n    output.Color = vec4<f32>(vertexColor, 1.0);\n\n    return output;\n}\n\n@fragment\nfn fs_main(@location(0) Color: vec4<f32>) -> @location(0) vec4<f32> {\n    return Color;\n}";class t{constructor(e){const t=new Float32Array([1,.5,1,1,1,-.5,-.5,0,1,0,.5,-.5,0,0,1]),n=GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,o={size:t.byteLength,usage:n,mappedAtCreation:!0};this.buffer=e.createBuffer(o),new Float32Array(this.buffer.getMappedRange()).set(t),this.buffer.unmap(),this.bufferLayout={arrayStride:20,attributes:[{shaderLocation:0,format:"float32x2",offset:0},{shaderLocation:1,format:"float32x3",offset:8}]}}}var n,o;o=function*(){var n;const o=document.getElementById("gfx-main"),r=yield null===(n=navigator.gpu)||void 0===n?void 0:n.requestAdapter(),a=yield null==r?void 0:r.requestDevice(),i=o.getContext("webgpu"),u="bgra8unorm";i.configure({device:a,format:u,alphaMode:"opaque"});const f=new t(a),c=a.createBindGroupLayout({entries:[]}),s=a.createBindGroup({layout:c,entries:[]}),l=a.createPipelineLayout({bindGroupLayouts:[c]}),d=a.createRenderPipeline({vertex:{module:a.createShaderModule({code:e}),entryPoint:"vs_main",buffers:[f.bufferLayout]},fragment:{module:a.createShaderModule({code:e}),entryPoint:"fs_main",targets:[{format:u}]},primitive:{topology:"triangle-list"},layout:l}),v=a.createCommandEncoder(),p=i.getCurrentTexture().createView(),m=v.beginRenderPass({colorAttachments:[{view:p,clearValue:{r:.5,g:0,b:.25,a:1},loadOp:"clear",storeOp:"store"}]});m.setPipeline(d),m.setBindGroup(0,s),m.setVertexBuffer(0,f.buffer),m.draw(3,1,0,0),m.end(),a.queue.submit([v.finish()])},new((n=void 0)||(n=Promise))((function(e,t){function r(e){try{i(o.next(e))}catch(e){t(e)}}function a(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(r,a)}i((o=o.apply(void 0,[])).next())}))})();